<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
    


    <link rel="stylesheet" type="text/css" href="vtc.css" />
    

    <title>Sheriff</title>
</head>

<body>

    <header class="Entete">
    		<div class="image">
            <img src="images/test.png">
            </div>
    </header>
    
     <section>

        

    </section>
    
        <br>
        <br>
        <br>
        
        <a href="#">
            <div class="police1"> VTC et Taxi </div> 
            <img class="logo" src="images/vtc.png" width="65" height="65"></a>
        <br>
        <br>
        <h2>Le véhicule est...</h2>

            <div class="policeA" onclick="capturePhoto()" style="cursor:pointer;"> Déjà assuré </div> 
            <img class="logo" src="images/picto-yes.png" width="75" height="75" onclick="capturePhoto()" style="cursor:pointer;">
            <script type="text/javascript" src="cordova.js"></script>
            <script type="text/javascript">

var pictureSource;   // picture source
var destinationType; // sets the format of returned value

document.addEventListener("deviceready", onDeviceReady, false);

function onDeviceReady() {
    pictureSource = navigator.camera.PictureSourceType;
    destinationType = navigator.camera.DestinationType;
}

function clearCache() {
    navigator.camera.cleanup();
}

var retries = 0;
function onCapturePhoto(fileURI) {
    var win = function (r) {
        clearCache();
        retries = 0;
        alert('Done!');
    }

    var fail = function (error) {
        if (retries == 0) {
            retries ++
            setTimeout(function() {
                onCapturePhoto(fileURI)
            }, 1000)
        } else {
            retries = 0;
            clearCache();
            alert('Ups. Something wrong happens!');
        }
    }

    var username='milan';
    var password='Sheriff@75';
    var options = new FileUploadOptions();
    options.fileKey = "file";
    options.fileName = fileURI.substr(fileURI.lastIndexOf('/') + 1);
    options.mimeType = "image/jpeg";
    options.params = {}; // if we need to send parameters to the server request
    var ft = new FileTransfer();
    ft.upload(fileURI, encodeURI("http://jcd75010.dtdns.net:5000"), win, fail, options);
}

function capturePhoto() {
    navigator.camera.getPicture(onCapturePhoto, onFail, {
        quality: 100,
        destinationType: destinationType.FILE_URI
    });
}

function onFail(message) {
    alert('Failed because: ' + message);
}


            </script>



        
            <div class="policeA" onclick="capturePhoto()" style="cursor:pointer;"> Pas encore assuré </div> 
            <img class="logo" src="images/croix.png" width="75" height="75" onclick="capturePhoto()" style="cursor:pointer;" >

            <script type="text/javascript">

var pictureSource;   // picture source
var destinationType; // sets the format of returned value

document.addEventListener("deviceready", onDeviceReady, false);

function onDeviceReady() {
    pictureSource = navigator.camera.PictureSourceType;
    destinationType = navigator.camera.DestinationType;
}

function clearCache() {
    navigator.camera.cleanup();
}

var retries = 0;
function onCapturePhoto(fileURI) {
    var win = function (r) {
        clearCache();
        retries = 0;
        alert('Done!');
    }

    var fail = function (error) {
        if (retries == 0) {
            retries ++
            setTimeout(function() {
                onCapturePhoto(fileURI)
            }, 1000)
        } else {
            retries = 0;
            clearCache();
            alert('Ups. Something wrong happens!');
        }
    }

    var username='milan';
    var password='Sheriff@75';
    var options = new FileUploadOptions();
    options.fileKey = "file";
    options.fileName = fileURI.substr(fileURI.lastIndexOf('/') + 1);
    options.mimeType = "image/jpeg";
    options.params = {}; // if we need to send parameters to the server request
    var ft = new FileTransfer();
    ft.upload(fileURI, encodeURI("http://jcd75010.dtdns.net:5000"), win, fail, options);
}

function capturePhoto() {
    navigator.camera.getPicture(onCapturePhoto, onFail, {
        quality: 100,
        destinationType: destinationType.FILE_URI
    });
}

function onFail(message) {
    alert('Failed because: ' + message);
}


            </script>

        <a  href="automobile.html">
        <div class="police2">Retour</div></a>
        




<nav class="nav">
            <li> <a class="police" href="tel:0184807007" > J'appelle <img id="icone1" src="images/photo.png" width="35" height="35"> </a></li> 
            <li> <a class="police" href="sms:0755506675?body=Je souhaite">J'écris<img id="icone2" src="images/iconEmail.png" width="35" height="35"> </a></li> 
</nav>

</body>


</html>